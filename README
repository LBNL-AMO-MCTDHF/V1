
  ** LBNL-AMO-MCTDHF VERSION 1.16 **

v1.16 FACTOR OF 1/3 REMOVED FROM PHOTOIONIZATION (Actions 16,17)

   **** photoionization RESULTS WILL BE 3x GREATER NOW - BEWARE ****

   the factor of 1/3 is historical.  The cross section now reported
   in column 3 of xsec.spi.dat, xsec.proj.spi.datXXXX, is
   the quantum cross section in Megabarns for the problem at hand.
   Perform a 1:2 weighted average of parallel and perpendicular
   to obtain the cross section averaged over orientations

   The ionization and absorption cross section for H2 is about 12 Mb 
   at ion onset for both perpendicular and parallel.  Not 4.  He xsec
   is about 8.

ALSO v1.16 linear damping (fttriwindow=1) NEW DEFAULT actions 1,16,17,21
   RESULTS WILL BE DIFFERENT (hopefully better)

ALSO v1.16 ABSOLUTE UNITS (megabarns) IMPLEMENTED FOR ACTION 21
   emission/absorption.  Column 9 in ZDipoleft.Dat etc is cross 
   section in Mb. See H2ABSORPTION and HEABSORPTION examples.

ALSO v1.16 par_consplit.ne.0 attempted first time.  Total MPI 
   parallelization of LBNL-AMO-MCTDHF calculation with
   par_consplit.ne.0 and parorbsplit.eq.3 (parorbsplit.eq.3 for 
   polyatomic only)

CHANGES TO PULSE FOURIER TRANSFORM SUBROUTINES IN VERSION 1.10.
VARIABLES EFLUXLO, EFLUXHI, NEFLUX, FLUXNBINS, FLUXSINEOPT DEPRECATED.
NOTE NEW VARIABLE pulseft_estep USED FOR Pulseft.Dat OUTPUT ONLY

-----------------------------------------------------------------------
Please watch the commits to stay notified about bugs and bug fixes:
     https://github.com/LBNL-AMO-MCTDHF/V1/commits/master

Known bugs appear as issues:
     https://github.com/LBNL-AMO-MCTDHF/V1/issues
-----------------------------------------------------------------------

The scripts in the example directories use bash and gnuplot.  

Using the bash shell is recommended but may not be necessary.
To begin a bash shell, if it is not your default, simply execute the command
   prompt> bash
To set bash as your default shell on mac or other linux, execute the command
   prompt> chsh -s /bin/bash

Lots of scripts use gnuplot.  Gnuplot should be installed on your system,
if you want to have an easy time seeing the results of the example calculations.
If gnuplot is installed on your system then the command
   prompt> which gnuplot
should return the location of the executable file.  If it returns nothing then
it is not installed.  The best way to install gnuplot is probably with macports.

Possible workflow described below for mac.  The general idea is that you can 
   work entirely within the directory that you clone and to which you pull, not 
   copy the git distribution elsewhere for compilation.

----------------------------------------------------------------------------

On Mac: minimal demonstration.  BIN*mac* directories use GFORTRAN.  You must have
gfortran installed to use the BIN*mac* directories.  To install gfortran -- which
you will need to do if the Makeme step fails -- visit 

     https://gcc.gnu.org/wiki/GFortranBinariesMacOS

0)   git clone https://github.com/LBNL-AMO-MCTDHF/V1 master

          or download using a web browser

     https://github.com/LBNL-AMO-MCTDHF/V1/archive/master.zip
          and unzip this file.

     You then have a V1 or V1-master directory with the code in it.  change
     to that directory:

     cd ./V1
         or
     cd ./V1-master

     and PERFORM ALL OTHER STEPS IN THIS V1 DIRECTORY.

1)   cd COMPDIRS/BIN.ecs.hermnorm.mac
     ./Makeme

     if this fails, you need gfortran.  Also you may then

     cd ../debug.BIN.ecs.hermnorm.mac
     ./Makeme
     cd ../BIN.ecs.hermnorm.mac.mpi
     ./Makeme
     cd ../debug.BIN.ecs.hermnorm.mac.mpi
     ./Makeme

     You can delete the directories in COMPDIRS that you don't want.

2)   You need to have the code in your path.  Safe, temporary way:

2A)  cd COMPDIRS/BIN.ecs.hermorm.mac
     export PATH=$PATH:$PWD

2B)  Permanent way, system-wide, links in /opt/local/bin, requires root password:
     cd COMPDIRS/BIN.ecs.hermorm.mac
     ./LinkMe
     cd ../debug.BIN.ecs.hermorm.mac
     ./LinkMe debug
     cd ../BIN.ecs.hermorm.mac.mpi
     ./LinkMe mpi
     cd ../debug.BIN.ecs.hermorm.mac.mpi
     ./LinkMe mpi.debug

2C)  Permanent way, user-specific, script that edits your .bashrc file
     cd COMPDIRS/BIN.ecs.hermnorm.mac
     ./LinkMeLocal

     You must restart the terminal after step 2C.

3)   mkdir EXAMPLES          (you can also make other directories e.g. 
     mkdir MYRUNS            )
     cp -R -p EXAMPLES-depot/H2PHOTO EXAMPLES

4)   cd EXAMPLES/H2PHOTO
     ./Relax.Bat
     ./Pulse.Bat
     ./Fourier.Bat 
     ./Flux.Bat 500
     ./gnu.xsec

     as per the README in that H2PHOTO directory.  Also see the H2ABSORPTION
     example directory to start.
 
If you want to update the code and EXAMPLES-depot directories then perform 
step 5, like steps 1-4, in the V1 working directory,

5)   git pull https://github.com/LBNL-AMO-MCTDHF/V1 master
     ... then ./Makeme should be sufficient, in the BIN directories,
         but ./Makeme clean; ./Makeme would certainly be fail safe
         after updating the code with git pull.

----------------------------    MODULES TO LOAD    -----------------------------
---------------------------- ON NERSC & LAWRENCIUM -----------------------------

  COMPDIRS/BIN.ecs.hermnorm.law, 
  COMPDIRS/BIN.ecs.hermnorm.edison, etc.

LAWRENCIUM:

module load mkl

CARVER:

module unload pgi openmpi
module load intel openmpi-intel mkl
module unload torque
module load torque

HOPPER:

module swap PrgEnv-pgi PrgEnv-intel
#yes last
module unload cray-libsci

EDISON:

module unload cray-libsci
module load mkl

